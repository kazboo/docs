# ページ全体のレイアウトとナビゲーション

レスポンシブWebデザインと相性がよく、今後さらに普及すると思われるフレックスボックスを使用したサンプル

## 実践的なコーディングのために知っておきたいCSSの知識

### CSSの上書き原則

* 一度設定したプロパティを極力書かなくてよいようになっている
  * CSSソースコードが長くなるのを防ぐ
  * 変更が楽になるように

* 次ような法則でスタイルが適用される
  * `継承`
    * 親要素に設定したスタイルの一部は、その子孫要素にも適用される(`継承`)
  * `カスケード`
    * より多くの要素に適用されるスタイルは、特定の要素だけに適用されるスタイルで上書きできる(`詳細度`)
    * 先に出てきたスタイルは、後から出てきたスタイルで上書きできる

* 詳細度
  * セレクタに決められている点数のこと
  * 高いスタイルは低いスタイルを上書きする
    * タイプセレクタなど、より多くの要素に適用されるされるセレクタは詳細度の点数が低い
    * idセレクタなど、より少ない要素にピンポイントで適用されるセレクタは詳細度の点数が高い

  |セレクタの種類|セレクタの例|詳細度(点数)|
  |:--|:--|:--|
  |style属性|&lt;p style="color:red;"&gt;|1000点|
  |idセレクタ|#id_name|100点|
  |クラスセレクタ・属性セレクタ・疑似クラス|.class, [type="text"], :hover|10点|
  |タイプセレクタ・疑似要素|p, ::before|1点|
  |全称セレクタ|*|0点|

  使っているセレクタの点数を合計して実際のセレクタの詳細度が決まる

  |セレクタの例|点数の数え方|詳細度(合計)|
  |:--|:--|:--|
  |#main|idセレクタx1=100点|100点|
  |div.container.p|クラスx1, タイプx2|12点|
  |div.sidebar|クラスx1, タイプx1|11点|
  |.footer|クラスx1|10点|

  ```html
  <p class="notice">ご注意</p>
  ```
  ```css
  /* 1点(低) */
  p {
      margin: 0;
      color: #000;
  }
  /* 10点(高) */
  .notice {
      color: #f00;
  }
  ```
  最終的に適用されるスタイル
  ```
  margin: 0;
  color: #f00;
  ```

* カスケード
  * 同じセレクタが2回以上出てきた場合(詳細度の点数が同じ)先に出てきたスタイルを、後から出てきたスタイルが上書き
  ```css
  h1 {
      font-size: 20px;
  }
  /* 詳細度が同じ */
  h1 {
      font-size: 18px;
  }
  ```
  適用されるスタイル
  ```css
  font-size: 18px;
  ```

* どうすれば？
  * ページ全体の大まかなスタイルを適用してから、だんだん細かい部分を調整して仕上げる
    * タイプセレクタ > クラスセレクタ > 子孫セレクタ > idセレクタ
    * 詳細度がだんだん高くなる順
  * タイプセレクタには「ページ全体に影響する」CSSを書く
    ```css
    html, body {
        font-size: 16px;
    }
    ```
    ページ全体のフォントサイズを設定するならhtml,bodyの両方に
  * クラスセレクタ(or 子孫セレクタ)を中心に使用する
    * 更新作業のことを考えて、CSSで使用するセレクタにはできるだけ詳細度が低くなるものを使う(後から上書きが可能なため)
    * 子孫セレクタを使う場合、詳細度を低く保つために、できるだけ個別のセレクタの数が少なくなるように書く
    ```html
    <nav>
        <ul>
            <li>home</li>
            <li>download</li>
            <li>contact</li>
        </ul>
    </nav>
    ```
    ```
    x nav ul li { ... }
    x nav ol li { ... }
    o nav li { ... }
    ```
  * 詳細度が極めて高いidセレクタは極力使わないようにする
  * idセレクタよりもさらに詳細度が高いstyle属性は、公開用webサイトでは使ってはいけない
    * 詳細度が高いだけでなく、HTMLドキュメントに紛れ込んでしまうため管理が非常に厄介
  * `!important`も原則つかってはいけない
    * そのプロパティはセレクタの詳細度に関係なく、必ず適用される
    ```css
    .item {
        display: block !important;
        margin: 0;
    }
    ```
    無理やりCSSを適用させるために使いがちだが、特別な理由がない限り使わないようにする  
    後からデザインを変更する必要が出てきたときに、とても困ることになる

## シングルコラムレイアウト

使用頻度も高く、より複雑なレイアウトのベースにもなる「基本形」

### ノーマライズCSSを読み込む

* 実践的なWebデザインでは、`ノーマライズCSS`というCSSライブラリを読み込んだり、スマホで表示しても全体が小さくなりすぎないようにするための準備をする
  ```html
  <!DOCTYPE html>
  <html>
  <head>
    <meta
      charset="utf-8">
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1">
    <title>Template</title>
    <link
      rel="stylesheet"
      href="normalize.css">
    <link
      rel="stylesheet"
      href="style.css">
  </head>
  <body>
  </body>
  </html>
  ```
  style.css
  ```css
  @charset "utf-8";
  body {
      margin: 0;
  }
  ```
  ビューポートの設定
  ```html
    <meta
        name="viewport"
        content="width=device-width, initial-scale=1">
  ```
  * ビューポートは「ページが表示される画面の領域」のこと  
    * スマホであればその端末の画面全体、パソコンならブラウザのウィンドウを指す  
  * ページがスマホかタブレットで表示されているときだけ効力がある
  * 書かれてない場合
    * スマホのブラウザは小さい画面に全体を縮小して表示しようとする(PCの画面サイズにのみ合わせて作られていると認識する)
    * 記載することで、ブラウザの縮小機能をキャンセルしている

* ノーマライズCSS
  * 異なるブラウザ間のちょっとした表示誤差を調整してくれるライブラリ
  * ブラウザの表示の違いを気にせずにCSSをかけるようになる
  * 最近は、よりスマホ向けWebサイト構築に最適化した`サニタイズCSS`を使うこともある
  * [ノーマライズCSS](https://necolas.github.io/normalize.css/)
  * [サニタイズCSS](https://github.com/csstools/sanitize.css/)

* HTMLの構造
  ```
  <body>
  +---------------------------+
  |***************************| <header>
  |:::::::::::::::::::::::::::| <nav>
  |@@@@@@@@@@@@@@@@@@@@@@@@@@@| <main>
  |@@@@@@@@@@@@@@@@@@@@@@@@@@@|
  |@@@@@@@@@@@@@@@@@@@@@@@@@@@|
  |///////////////////////////| <footer> それぞれのブロックはdivを加えて3重構造にする
  +---------------------------+
  ```
  * レスポンシブWebデザインとの相性のよさ
  * デザインの柔軟性を高めてマージンやパディング、背景の設定をしやすくする

* 他の情報を整理し、グループ化するタグ
  * header
    * ヘッダを意味する
  * nav
    * ページの主要なナビゲーションを意味する
  * section
    * セクションを意味する
    * 本来は1つの記事の部分的なまとまりを指す
    * ヘッダー、フッター以外のコンテンツの中心部分を囲む
  * main
    * ページの中心的なコンテンツを意味する
    * ページ内で一度しか使用できない
    * article, header, footer, navタグの子要素にしてはいけない
    * sectionタグの子要素にするのは可能
  * footer
    * フッターを意味する

* コメント
  ```html
  <div class="container">
    <div class="content">
        ...
    </div><!-- /.content -->
    <div class="sidebar">
        ...
    </div><!-- /.sidebar -->
  </div>
  ```
  実践的なWebデザインでは、開始タグと終了タグの関連がわかりやすいように、終了タグの後ろにクラス名がわかるコメントをよく残す

### シングルコラムにスペースを作る

* ウィンドウの端にくっつかないようにする
  * スペースを設定する場所
    * 基本的にbodyの直接の子要素には、左右のマージン・ボーダー・パディングを設定しない
    ```
    +-------------------------+
    |+-----------------------+|
    ||header                 ||
    |+--+-----------------+--+|
    |...|div container    |...|
    +---+-----------------+---+
    ```
    bodyの直接の子要素に設定した場合
    ```
    +-------------------------+
    |---+-----------------+---|
    |...|header           |...|
    |...+-----------------+...|
    |...|div container    |...|
    +---+-----------------+---+
    ```

* 上下にスペースを作るときの考え方
  * bodyの直接の子要素に、上マージンもしくは下マージンを設定する
  * それぞれに適用した背景と背景の間にスペースが開くことに注意する

* マージンとパディングの使い分けは以下のようにまとめることができる
  * ナビゲーション部分とメイン部分の背景と背景を離したいとき、もしくはボーダーラインを引きたいとき
    * ナビ部分のbodyの直接の子要素に、下マージンを設定(もしくはメイン部分に上マージンを設定)
    * ボーダーラインも同様
  * ナビゲーション部分とメイン部分の背景と背景を離したくないとき
    * ナビ部分とメイン部分のcontainerの子要素に上下パディングを設定する

* 伸縮幅の上限を設定する
  * あまりに横幅が広くなるとテキストが読み辛くなる
  * 伸縮の上限を決め、1000px以上は横に伸びないようにする
  * ページ全体をウィンドウの中央に配置するようにする
  ```css
  .container {
      margin: 0 auto 0 auto;
      padding: 0 16px 0 16px;
      max-width: 1000px;
  }
  ```

* max-widthプロパティ
  * 適用したボックスの横幅の上限を決めることができる
  * 使用頻度は落ちるが、以下のプロパティもある
    * min-width
    * max-height
    * min-height

* ページをウィンドウの中央に配置する
  * 左右マージンを`auto`にすると、親要素の中央に配置されるようになる

* 横幅
  * 現在のWebデザインでは、固定するなら960 - 980px, 伸縮させて上限を設けるなら上限を1000 - 1200px程度が多い