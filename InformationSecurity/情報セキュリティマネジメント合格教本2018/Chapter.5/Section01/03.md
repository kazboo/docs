# 3. IPアドレス

## IPアドレス

* インターネット上のノードを一意に特定するためのアドレス

* 重複は許されない

* IPv4では32bitで表現する
  * 人が見やすいように8bitごと(`1オクテット`)に区切って10進数化
  * 約43億台のノードを識別可能

## ネットワークアドレスとホストアドレス

* IPアドレスはネットワークアドレス部とホストアドレス部にわかれる
  * その境界を決めるのが`サブネットマスク`

* サブネットマスク
  * IPアドレスと同じように32bitであらわされる情報
  * 1で表される部分が`ネットワークアドレス部`
  * 0で表される部分が`ホストアドレス部`
  * `クラスレスサブネットマスク`
    * １オクテットの途中に境目が存在する場合
    * １０進数表記した場合、255と0以外の値をとることになる
  * 表記方法
    1. IPアドレスと別にそのまま記述
    1. CIDR(Classless Inter-Domain Routing, サイダー)表記
      * CIDRではサブネットマスクの値を好きに決められる
        * 同じネットワークとして扱うIPアドレスの個数を調整できる
        * IPアドレスを見てもサブネットマスクの値は分からない
          * サブネットマスクの値も一緒に伝える(サブネットマスクの１の個数)
          * 例）198.51.100.xxx`/24`

* IPアドレスとサブネットマスク

||10進数表記|2進数表記||
|:--|:--|:--|:--|
|サブネットマスク|255.255.0.0|11111111 11111111|00000000 00000000|
|||ネットワークアドレス部|ホストアドレス部|
|IPアドレス|192.168.0.1|11000000 10101000|00000000 00000001|
|ネットワークアドレス|192.168.0.0|11000000 10101000|00000000 00000000|
|ノードのIPアドレス|192.168.0.1|11000000 10101000|00000000 00000001|
|ブロードキャストアドレス|192.168.255.255|11000000 10101000|11111111 11111111|

## ネットワークアドレス部

* ネットワークに対して付与される番号
  * 同じNWに所属するノードのネットワークアドレス部は同一である必要あり

* ルータはIPアドレスのネットワークアドレス部をみてIPパケットを転送する必要があるかを判断する

* ネットワークを分割することによって、トラフィックの管理を実現する

* `ブロードキャストアドレス`
  * ホストアドレス部がすべて`1`のアドレス
  * そのネットワーク内のすべてのノードあての通信を意味する

* `ネットワークアドレス`
  * ホストアドレス部がすべて`0`のアドレス
  * そのネットワークそのものを意味する
  * ノードを表すものではない

* IPマルチキャスト
  * マルチキャスト通信
    * あるグループに所属しているすべてのノードを宛先に指定して送信を行うための技術
    * ブロードキャスト通信とは異なりIGMPプロトコルを使うことで1:n通信を行う

## ホストアドレス部

* 同じネットワークに参加しているノードを一意に判別するための番号

* ネットワークアドレス部とホストアドレス部の組み合わせにより、全体としてIPアドレスの一意性が保証される

## IPアドレスクラス

* 初期のIPネットワークで採用されていた概念
* IPアドレスをその先頭アドレスによって`３つの種類`に分ける
  * サブネットマスク情報が不要
  * Class A: 大規模ネットワーク(ノード数：16777214個)
  * Class B: 中規模ネットワーク(ノード数：65534個)
  * Class C: 小規模ネットワーク(ノード数：254個[2^8-2])

``` ip adress class
        |--8bit--|--8bit--|--8bit--|--8bit--|
Class A |0      N|                          |
Class B |10              N|                 |
Class C |110                      N|        |
(N) .. ネットワークアドレス部
```

* ネットワークに配布するIPアドレス数が固定される
  * 実運用時にIPアドレスに余剰が出る(数を調整できない)
  * `クラスレスサブネットマスク`のほうがきめ細かいIPアドレス管理が可能

## プライベートIPアドレス

* プライベートIPアドレス
  * 正規のIPアドレスの形をとる
  * IPプロトコルスタックを装備しているノードはそのまま利用することが可能
  * 異なるネットワークなら重複を許す
    * 実質的に利用できるIPアドレスの数を増やすことができる
  * 組織内で利用し、インターネット上に送出しない
  * 組織内では一意なアドレス
  * RFC(1918)で推奨されるクラスごとのプライベートIPアドレスは以下
    * クラスA: `10.0.0.0` - `10.255.255.255`
    * クラスB: `172.16.0.0` - `172.31.255.255`
    * クラスC: `192.168.0.0` - `192.168.255.255`
  * これに対し通常のIPアドレスを`グローバルIPアドレス`という

## MACアドレス

* イーサネットやFDDIで使用されるNICに割り振られる`6byte`の情報
  * `IEEE`の管理下`必ず一意`に定まるよう製造段階で焼きこまれる
  * データリンク接続を行うためのデータリンク層のアドレス
  * 同じネットワーク内で相手を識別するため

``` MAC
16進数

1byte
[12]-34-56-12-34-56
|-メーカ毎-|-製品毎-|
```