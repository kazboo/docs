# QuiklabsとGCPの概要

* Qwiklabs プラットフォームについて学び、ラボ環境の主な機能を確認する。
* Qwiklabs のクレジットについて学び（場合によってはクレジットを購入し）、ラボのインスタンスを起動する。
* 所定の認証情報を使って GCP Console にアクセスする方法を学ぶ。
* GCP プロジェクトについて学び、プロジェクトに関してよくある誤解を確認する。
* GCP ナビゲーション メニューの使用方法を学び、GCP サービスの種類を把握する。
* 基本の役割について学び、特定のユーザーが使用できる操作を Cloud IAM サービスで調べる。
* Cloud Shell について学び、gcloud ツールキットを使用するコマンドを実行する。
* API ライブラリについて学び、主な機能を確認する。
* Cloud Shell にあらかじめインストールされているツールを使用して touch、nano、cat などのコマンドを実行し、ファイルの中身を作成、編集、出力する。

## Qwiklabsの基礎

* ラボを開始（ボタン）
    + このボタンをクリックすると、必要なすべてのサービスと認証情報が有効化された一時的な GCP 環境が作成され、ラボのマテリアルを使用した演習を開始できるようになります。クリックすると、ラボの手順を完了するために必要な時間が設定されたタイマーのカウントダウンが始まります。タイマーが00:00:00 になると、ラボ環境と一時的な認証情報は削除されます。

* クレジット
    + ラボの料金です。1 クレジットは通常 1 米ドルに相当します（購入するクレジットが多いほど、割引が大きくなります）。ラボの料金は、入門レベル（このラボなど）が 1 クレジット、基本レベルが 5 クレジット、上級レベルが 7 クレジット、エキスパート レベルが 9 クレジットとなっており、専門性が高いラボほど料金が高くなります。これは、タスクの処理内容が高度になり、必要な GCP リソースが増えるためです。

* 実行時間
    + ラボを実行できる時間が設定されています。前述したように、[ラボを開始] をクリックするとタイマーのカウントダウンが始まり、やがて 00:00:00 になります。そうすると、一時的な環境とリソースは削除されます。ラボを完了できるだけの十分な時間が設定されていますが、ラボの実行中は他の作業を行わないようにしてください

* スコア
    + すべてではありませんが、ほとんどのラボにはスコアが含まれています。これは「アクティビティ トラッキング」と呼ばれる機能で、ラボに含まれる所定の手順を確実に完了するためのものです。アクティビティ トラッキング機能が付いているラボに合格するには、すべての手順を順番に完了する必要があります（そのようにしてラボを完了した場合のみ、クレジットを受け取ることができます）。

* クレジットを購入する
    + まだクリックしていない場合は、ここで [ラボを開始] をクリックしてください。「アクセスコード」（専門知識のレベルにかかわらず 1 つのラボの費用をまかなうクーポン）を持っているか、すでにクレジットを購入している場合は、次のセクション「ラボを開始する」までスキップしてかまいません。それ以外の場合は、[クレジットの購入] をクリックします。すると、新しいページが開き、さまざまなクレジット パッケージが表示されます。

* ラボを開始する
    + ラボの主な機能とコンポーネントがわかったところで、右上にある [ラボを開始] ボタンをクリックします。アクセスコードをお持ちの場合はここでコードを入力し、[アクセスコードを使用して起動する] をクリックします。アクセスコードをお持ちでない場合は、[Launch with 1 Credit] をクリックします。
    + GCP 環境と認証情報の準備が整うまで時間がかかる場合があります。しばらくお待ちください。右上のタイマーのカウントダウンが始まり、[ラボを開始] ボタンが赤色の [ラボを終了] ボタンに変わると、設定がすべて完了し、Google Cloud Platform Console にログインできる状態になります。
    + 必要なすべてのタスクを完了するまでは、[ラボを終了] ボタンをクリックしないでください。クリックすると、一時的な認証情報が無効になり、ラボで行ったタスクにはアクセスできなくなります。最後まで進み、必要なすべての手順を完了したことを確認したら、[ラボを終了] ボタンをクリックします。完了したら必ずこのボタンをクリックしてください。このボタンをクリックしないと、その後、別のラボを受講できません（Qwiklabs では同時に複数の登録を行えないよう保護されています）。

* GCP プロジェクト ID
    + GCP プロジェクトは、Google Cloud のリソースを 1 つにまとめているエンティティです。ほとんどの場合、ここにはリソースとサービスが含まれます。たとえば、仮想マシンプール、データベース セット、それらを相互に接続するネットワークなどが保持されます。プロジェクトには各種設定とアクセス許可も含まれており、これを使用してセキュリティ ルールや、誰がどのリソースにアクセスできるかを指定します。
    + GCP プロジェクト ID は、GCP リソースと API を特定のプロジェクトにリンクするために使用される一意の識別子です。プロジェクト ID は GCP 全体で一意です。つまり、qwiklabs-gcp-xxx .... は 1 つしか存在しないため、グローバルに識別することが可能です。

* ユーザー名とパスワード
    + これらは GCP Identity and Access Management（IAM）サービスの ID を表す認証情報で、割り当てられたプロジェクトで GCP リソースを使用できるようにするアクセス権限（1 つ以上の役割）が設定されています。これらの認証情報は一時的なもので、ラボへのアクセス時にのみ使用できます。つまり、タイマーが 0 になると、その認証情報を使用して GCP プロジェクトにアクセスすることはできなくなります。

## GCP Console のプロジェクト

* GCP プロジェクトは、Google Cloud のリソースを 1 つにまとめているエンティティです
    + 仮想マシンプール、データベース セット、それらを相互に接続するネットワークなど
    + プロジェクトには各種設定とアクセス許可も含まれている

* プロジェクト情報
    + 名前、ID、番号

## ナビゲーションメニューとサービス

### ナビゲーション メニュー

* GCP のコアサービスに移動できるGCP Console の重要なコンポーネント
    + プラットフォームのサービスに素早くアクセス、サービスの概要も確認可能

* 7つのカテゴリ
    + コンピューティング
    + ストレージ
    + ネットワーキング
    + Stackdriver
    + ツール
    + ビッグデータ
    + 人工知能

* https://cloud.google.com/docs/overview/cloud-platform-services#top_of_page

### 役割と権限

* 誰がどのリソースにアクセスできるかを定義できる

* Cloud Identity and Access Management(IAM)サービスを使用して検査や変更ができる
    + `メンバー`フィールドはログインユーザ名と同じものに設定される
    + `名前`フィールドは「ユーザ名 student」に設定される
    + `役割(role)`フィールドは「編集者(Editor)」に設定される

* GCPに用意されている3つの基本役割
    + プロジェクトレベルの権限を設定する
    + 別途指定しない限り、全てのGCPサービスへのアクセスと管理がこれによって制御される
        + roles/viewr
            - 既存のリソースやデータの表示(ただし、変更は不可)等、状態に影響しない読み取り専用アクションに必要な権限
        + roles/editor
            - 全ての閲覧者権限と、状態を変更するアクション(既存のリソースの変更など)に必要な権限
            - GCPプロジェクトのメンバーの追加や削除はできない
        + roles/owner
            - 全ての編集者権限と、以下のアクションを実行するために必要な権限
                - プロジェクトおよびプロジェクト内のすべてのリソースの権限と役割を管理する
                - プロジェクトの課金情報を設定する

### APIとサービス

* ビジネス管理から機械学習にまで及ぶ様々な分野のAPIが200以上用意されている

* Cloud APIでは[Google API 設計ガイド](https://cloud.google.com/apis/design/)で説明されているリソース指向の設計原則が使用される

* Qwiklabs 以外で独自の GCP プロジェクトを作成する場合は、特定の API を各自で有効にする必要があるので注意

* トラフィックレベル、エラー率、レイテンシなど、プロジェクトでのAPIお使用状況に関する情報が提供される
    + アプリケーションで発生した問題の優先度を素早く判断できる

* APIの詳細について
    + [APIs Exploer](https://developers.google.com/apis-explorer/#p/)
    + [APIs Explorer:Qwik Start](https://google.qwiklabs.com/focuses/2457?parent=catalog)

### Cloud Shell

* ブラウザ内のコマンド プロンプト実行環境であり、端末プロンプトでコマンドを入力して GCP プロジェクトのリソースやサービスを管理できる

* Debianベースの仮想マシンで、様々な開発ツール(gcloud, git etc)や、永続的な5GBのホームディレクトリが提供されている

* Cloud Shell には固有のコマンドライン ツールがあらかじめインストールされている
    ```sh
    $ gcloud auth list
    Credentialed Accounts
    ACTIVE  ACCOUNT
    *       ..._student@qwiklabs.net
    To set the active account, run:
        $ gcloud config set account `ACCOUNT`
    ```

* [自身のマシンで使用する場合](https://cloud.google.com/sdk/gcloud/)

* 自分のマシンで gcloud を実行した場合は、セッション間で config 設定が維持されます。Cloud Shell では、新しいセッションまたは再接続のたびに設定し直す必要があります。